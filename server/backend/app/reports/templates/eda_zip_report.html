<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>ZIP EDA Report - {{ dataset.name }}</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; font-size: 13px; }
    h1, h2, h3 { color: #333; }
    ul { list-style-type: none; padding-left: 16px; }
    li::before { content: "â–¸ "; color: #555; }
    table { border-collapse: collapse; width: 100%; margin-bottom: 16px; }
    th, td { border: 1px solid #ddd; padding: 4px 6px; text-align: left; }
    th { background-color: #f2f2f2; }
    .section { margin-bottom: 20px; }
    .small { font-size: 11px; color: #666; }
  </style>
</head>
<body>
  <h1>ZIP EDA Report</h1>
  <h2>{{ dataset.name }}</h2>

  <div class="section">
    <h3>Dataset Info</h3>
    <p>ZIP Type: <strong>{{ eda.zip_type }}</strong></p>
    <p>Total Files: {{ eda.stats.total_files }}</p>
    <p>Image Files: {{ eda.stats.image_files }}, Text Files: {{ eda.stats.text_files }}, CSV Files: {{ eda.stats.csv_files }}</p>
    <p>Top-level directories: {{ eda.stats.subdirs }}</p>
  </div>

  {% if eda.roboflow %}
  <div class="section">
    <h3>Roboflow Summary</h3>
    <p>Classes:</p>
    <ul>
      {% for cls in eda.roboflow.classes %}
      <li>{{ cls }}</li>
      {% endfor %}
    </ul>

    <h4>Splits</h4>
    {% for split_name, s in eda.roboflow.splits.items() %}
      <h5>{{ split_name }}</h5>
      <p>Images: {{ s.num_images }}, Labels: {{ s.num_labels }}</p>
      {% if s.class_counts %}
      <table>
        <thead>
          <tr><th>Class</th><th>Count</th></tr>
        </thead>
        <tbody>
          {% for cname, cnt in s.class_counts.items() %}
          <tr>
            <td>{{ cname }}</td>
            <td>{{ cnt }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      {% endif %}
    {% endfor %}
  </div>
  {% endif %}

  <div class="section">
    <h3>Directory Structure</h3>

    {% macro render_node(node) -%}
      <li>
        {{ node.name }}
        {% if node.children %}
        <ul>
          {% for child in node.children %}
            {{ render_node(child) }}
          {% endfor %}
        </ul>
        {% endif %}
      </li>
    {%- endmacro %}

    <ul>
      {{ render_node(eda.tree) }}
    </ul>
  </div>

  <div class="section small">
    Generated by Dataset Drift Studio
  </div>
</body>
</html>